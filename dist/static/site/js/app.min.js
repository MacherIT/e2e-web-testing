"use strict";angular.module("MainApp",["ngRoute","ngTouch","HomeModule","AuthModule"]).controller("mainController",["$location","$rootScope","$window","auth",function(e,o,t,n){o.isMobile=t.innerWidth<=768,angular.element(t).bind("resize",function(){o.isMobile=t.innerWidth<=768,o.$$phase||o.$apply()}),o.$on("$routeChangeSuccess",function(){var t="";e.$$path.split("/").map(function(e){""!==e&&(t+="-"+e)}),o.bodyClass=""!==t?"page"+t:"page-home"})}]).filter("precio",function(){return function(e){return e?parseFloat(e).toFixed(2):""}}).filter("encodeurl",function(){return function(e){return e?window.encodeURIComponent(e):""}}).filter("removeTrailingSlash",function(){return function(e){return e?"/"===e[0]?e.slice(1):e:""}}),angular.module("MainApp").config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"/views/home/index.html",controller:"home.index"}).when("/carrito",{templateUrl:"/views/carrito/index.html",controller:"carrito.index"}).when("/productos",{templateUrl:"/views/productos/index.html",controller:"productos.index"}).when("/productos/:id",{templateUrl:"/views/productos/show.html",controller:"productos.show"}).when("/login",{templateUrl:"/views/auth/login.html",controller:"auth.login"}).when("/logout",{templateUrl:"views/home/index.html",resolve:{secureAccess:["auth","$window",function(e,t){e.isLoggedIn()||(t.location.href="#/",t.location.reload())}]},controller:"auth.logout"}).otherwise({templateUrl:"/views/home/index.html",redirectTo:"/"})}]),angular.module("MainApp").directive("mainMenu",function(){return{restrict:"E",templateUrl:"/views/general/main-menu.html",controller:"general.main-menu"}}).directive("footerSection",function(){return{restrict:"E",templateUrl:"/views/general/footer-section.html",controller:"general.footer"}}).directive("slideNext",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){o.hideAll&&$(o.hideAll).slideUp(),$(t).next().stop().slideDown()})}}}).directive("loadFrame",function(){return{restrict:"A",link:function(e,t,o){$("document").ready(function(){$(t).attr("src",o.source)})}}}).directive("scrollRight",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(o.target).animate({scrollLeft:"+="+$(o.target).width()},parseInt(o.time))})}}}).directive("scrollLeft",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(o.target).animate({scrollLeft:"-="+$(o.target).width()},parseInt(o.time))})}}}).directive("scrollToContacto",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("body, html").animate({scrollTop:$("footer-section").offset().top},500)})}}}).directive("scrollToTarget",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("body, html").animate({scrollTop:$(o.target).offset().top},700)})}}}).directive("escondeMenu",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("#navbar").collapse("hide")})}}}).directive("flotante",function(){return{restrict:"A",link:function(e,t,o){$(window).on("scroll",function(e){50<$(window).scrollTop()?$(window).width()<=992&&$(t).addClass("flotante"):$(t).removeClass("flotante")})}}}),angular.module("AuthModule",[]),angular.module("HomeModule",[]).controller("home.index",["$scope","$http",function(o,e){e.get("/assets/data/home/home.json").then(function(e){var t=e.data;o.cabecera=t.cabecera,o.leyendoTuMente=t.leyendoTuMente,o.imagenEmpresa=t.imagenEmpresa,o.equipoMarketing=t.equipoMarketing,o.featuresApp=t.featuresApp,o.beneficios=t.beneficios,o.ahorro=t.ahorro,o.equipoAnt=t.equipoAnt,o.featuresItemActivo=o.featuresApp.items[0],o.equipoItemActivo=o.equipoAnt.items[0]},function(e){console.error(e)}),o.setFeaturesItemActivo=function(e){o.featuresItemActivo=e},o.setEquipoItemActivo=function(e){o.equipoItemActivo=e}}]),angular.module("HomeModule").directive("fadeInOnScroll",function(){return{restrict:"A",link:function(e,t,o){$(window).on("scroll",function(e){$(window).scrollTop()+.5*window.innerHeight>=$(t).offset().top&&0==$(t).find(".cuerpo").css("opacity")&&$(t).find(".cuerpo").addClass("fadeIn")})}}}).directive("cabecera",function(){return{restrict:"E",templateUrl:"/views/home/cabecera.html"}}).directive("leyendoTuMente",function(){return{restrict:"E",templateUrl:"/views/home/leyendo-tu-mente.html"}}).directive("imagenEmpresa",function(){return{restrict:"E",templateUrl:"/views/home/imagen-empresa.html"}}).directive("equipoMarketing",function(){return{restrict:"E",templateUrl:"/views/home/equipo-marketing.html"}}).directive("featuresApp",function(){return{restrict:"E",templateUrl:"/views/home/features-app.html"}}).directive("beneficios",function(){return{restrict:"E",templateUrl:"/views/home/beneficios.html"}}).directive("ahorro",function(){return{restrict:"E",templateUrl:"/views/home/ahorro.html"}}).directive("equipoAnt",function(){return{restrict:"E",templateUrl:"/views/home/equipo-ant.html"}}),angular.module("MainApp").factory("auth",["$http","$window",function(t,o){var n=function(){return o.localStorage["ant-token"]},e={headers:{Authorization:"Bearer "+n()}},r=function(e){o.localStorage["ant-token"]=e};return{saveToken:function(e){return r(e)},getToken:function(){return n()},secureKey:e,isLoggedIn:function(){var e=n(),t=void 0;return!!e&&(t=e.split(".")[1],t=o.atob(t),(t=JSON.parse(t)).exp>Date.now()/1e3)},currentUser:function(){if(isLoggedIn()){var e=n().split(".")[1];return e=o.atob(e),{email:(e=JSON.parse(e)).email,name:e.name}}},login:function(e){return t.post("/api/usuarios/login",e).then(function(e){return r(e.data.token),e},function(e){return e})},logout:function(){o.localStorage.removeItem("ant-token")}}}]),angular.module("MainApp").factory("getApiData",["$http","$rootScope",function(e,t){return{}}]),angular.module("MainApp").factory("storage",["$window","$rootScope",function(e,t){return{}}]),angular.module("AuthModule").controller("auth.login",["$scope","$window","auth",function(t,o,e){e.isLoggedIn()?(o.location.href="#/",o.location.reload()):(t.email="",t.password="",t.failLogin=!1,t.sendForm=function(){e.login({email:t.email,password:t.password}).then(function(e){401===e.status?t.failLogin=!0:(o.location.href="#/",o.location.reload())})})}]).controller("auth.logout",["$scope","$window","auth",function(e,t,o){o.logout(),t.location.href="#/",t.location.reload()}]),angular.module("MainApp").controller("general.main-menu",function(){}).controller("general.footer",["$scope","$http",function(t,e){t.sent=!1,t.formcontacto={nombre:"",telefono:"",email:"",consulta:"",solicitado:!1},t.formcontacto.enviar=function(){t.sent=!0,e.post("api/mailing/contacto",{nombre:t.formcontacto.nombre,telefono:t.formcontacto.telefono,email:t.formcontacto.email,consulta:t.formcontacto.consulta}).then(function(e){t.sent=!1,t.formcontacto.solicitado=!0,t.formcontacto.envioCorrecto=!0},function(e){t.sent=!1,t.formcontacto.solicitado=!0,t.formcontacto.envioCorrecto=!1,console.error(e)})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3Qvc3RhdGljL3NpdGUvanMvYXBwLm1pbi5qcyIsIm1haW4uanMiLCJyb3V0ZXMuanMiLCJkaXJlY3RpdmVzL21haW4uanMiLCJjb250cm9sbGVycy9hdXRoL2luZGV4LmpzIiwiY29udHJvbGxlcnMvaG9tZS9pbmRleC5qcyIsImRpcmVjdGl2ZXMvaG9tZS9kaXJlY3RpdmVzLmpzIiwic2VydmljZXMvX2F1dGguanMiLCJzZXJ2aWNlcy9fZ2V0LWFwaS1kYXRhLmpzIiwic2VydmljZXMvX3N0b3JhZ2UuanMiLCJjb250cm9sbGVycy9hdXRoL19sb2dpbi5qcyIsImNvbnRyb2xsZXJzL2dlbmVyYWwvX2dlbmVyYWwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkbG9jYXRpb24iLCIkcm9vdFNjb3BlIiwiJHdpbmRvdyIsImF1dGgiLCJpc01vYmlsZSIsImlubmVyV2lkdGgiLCJlbGVtZW50IiwiYmluZCIsIiQkcGhhc2UiLCIkYXBwbHkiLCIkb24iLCJib2R5Q2xhc3MiLCIkJHBhdGgiLCJzcGxpdCIsIm1hcCIsInRyYW1vIiwiZmlsdGVyIiwiaW5wdXQiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsIndpbmRvdyIsImVuY29kZVVSSUNvbXBvbmVudCIsInNsaWNlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImhhc2hQcmVmaXgiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJyZXNvbHZlIiwic2VjdXJlQWNjZXNzIiwiaXNMb2dnZWRJbiIsImxvY2F0aW9uIiwiaHJlZiIsInJlbG9hZCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsImxpbmsiLCJzY29wZSIsImVsbSIsImF0dHJzIiwiJCIsIm9uIiwiaGlkZUFsbCIsInNsaWRlVXAiLCJuZXh0Iiwic3RvcCIsInNsaWRlRG93biIsInJlYWR5IiwiYXR0ciIsInNvdXJjZSIsInRhcmdldCIsImFuaW1hdGUiLCJzY3JvbGxMZWZ0Iiwid2lkdGgiLCJwYXJzZUludCIsInRpbWUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJjb2xsYXBzZSIsImUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiJHNjb3BlIiwiJGh0dHAiLCJnZXQiLCJ0aGVuIiwiX3JlZiIsImRhdGEiLCJjYWJlY2VyYSIsImxleWVuZG9UdU1lbnRlIiwiaW1hZ2VuRW1wcmVzYSIsImVxdWlwb01hcmtldGluZyIsImZlYXR1cmVzQXBwIiwiYmVuZWZpY2lvcyIsImFob3JybyIsImVxdWlwb0FudCIsImZlYXR1cmVzSXRlbUFjdGl2byIsIml0ZW1zIiwiZXF1aXBvSXRlbUFjdGl2byIsImVycm9yIiwiY29uc29sZSIsInNldEZlYXR1cmVzSXRlbUFjdGl2byIsIml0ZW0iLCJzZXRFcXVpcG9JdGVtQWN0aXZvIiwiaW5uZXJIZWlnaHQiLCJmaW5kIiwiY3NzIiwiZmFjdG9yeSIsImdldFRva2VuIiwibG9jYWxTdG9yYWdlIiwic2VjdXJlS2V5IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzYXZlVG9rZW4iLCJ0b2tlbiIsInBheWxvYWQiLCJhdG9iIiwiSlNPTiIsInBhcnNlIiwiZXhwIiwiRGF0ZSIsIm5vdyIsImN1cnJlbnRVc2VyIiwiZW1haWwiLCJuYW1lIiwibG9naW4iLCJ1c2VyIiwicG9zdCIsInJlc3BvbnNlIiwiZXJyIiwibG9nb3V0IiwicmVtb3ZlSXRlbSIsInBhc3N3b3JkIiwiZmFpbExvZ2luIiwic2VuZEZvcm0iLCJzdGF0dXMiLCJzZW50IiwiZm9ybWNvbnRhY3RvIiwibm9tYnJlIiwidGVsZWZvbm8iLCJjb25zdWx0YSIsInNvbGljaXRhZG8iLCJlbnZpYXIiLCJlbnZpb0NvcnJlY3RvIl0sIm1hcHBpbmdzIjoiQUFBQSxhQ0FBQSxRQUNHQyxPQUFPLFdBQ04sVUFDQSxVQUNBLGFBQ0EsZUFFREMsV0FDQyxrQkFBQSxZQUFBLGFBQUEsVUFBQSxPQUNBLFNBQUNDLEVBQVdDLEVBQVlDLEVB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YU0sZUFBZ0IsRUFDcEMzQyxRQUFRRCxNQUFNQSIsImZpbGUiOiJkaXN0L3N0YXRpYy9zaXRlL2pzL2FwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJNYWluQXBwXCIsIFtcIm5nUm91dGVcIiwgXCJuZ1RvdWNoXCIsIFwiSG9tZU1vZHVsZVwiLCBcIkF1dGhNb2R1bGVcIl0pLmNvbnRyb2xsZXIoXCJtYWluQ29udHJvbGxlclwiLCBmdW5jdGlvbiAoJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkd2luZG93LCBhdXRoKSB7XG5cbiAgJHJvb3RTY29wZS5pc01vYmlsZSA9ICR3aW5kb3cuaW5uZXJXaWR0aCA8PSA3Njg7XG5cbiAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICRyb290U2NvcGUuaXNNb2JpbGUgPSAkd2luZG93LmlubmVyV2lkdGggPD0gNzY4O1xuICAgICRyb290U2NvcGUuJCRwaGFzZSB8fCAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICB9KTtcblxuICAkcm9vdFNjb3BlLiRvbihcIiRyb3V0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBib2R5Q2xhc3MgPSBcIlwiO1xuXG4gICAgdmFyIHBhdGggPSAkbG9jYXRpb24uJCRwYXRoLnNwbGl0KFwiL1wiKTtcblxuICAgIHBhdGgubWFwKGZ1bmN0aW9uICh0cmFtbykge1xuICAgICAgaWYgKHRyYW1vICE9PSBcIlwiKSB7XG4gICAgICAgIGJvZHlDbGFzcyArPSBcIi1cIiArIHRyYW1vO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS5ib2R5Q2xhc3MgPSBib2R5Q2xhc3MgIT09IFwiXCIgPyBcInBhZ2VcIiArIGJvZHlDbGFzcyA6IFwicGFnZS1ob21lXCI7XG4gIH0pO1xufSkuZmlsdGVyKFwicHJlY2lvXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCkge1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoaW5wdXQpLnRvRml4ZWQoMik7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9O1xufSkuZmlsdGVyKFwiZW5jb2RldXJsXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5lbmNvZGVVUklDb21wb25lbnQoaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfTtcbn0pLmZpbHRlcihcInJlbW92ZVRyYWlsaW5nU2xhc2hcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpZiAoaW5wdXRbMF0gPT09IFwiL1wiKSByZXR1cm4gaW5wdXQuc2xpY2UoMSk7ZWxzZSByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9O1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJNYWluQXBwXCIpLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoXCJcIik7XG5cbiAgJHJvdXRlUHJvdmlkZXIud2hlbihcIi9cIiwge1xuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcImhvbWUuaW5kZXhcIlxuICB9KS53aGVuKFwiL2NhcnJpdG9cIiwge1xuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9jYXJyaXRvL2luZGV4Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcImNhcnJpdG8uaW5kZXhcIlxuICB9KS53aGVuKFwiL3Byb2R1Y3Rvc1wiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL3Byb2R1Y3Rvcy9pbmRleC5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJwcm9kdWN0b3MuaW5kZXhcIlxuICB9KS53aGVuKFwiL3Byb2R1Y3Rvcy86aWRcIiwge1xuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9wcm9kdWN0b3Mvc2hvdy5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJwcm9kdWN0b3Muc2hvd1wiXG4gIH0pLndoZW4oXCIvbG9naW5cIiwge1xuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9hdXRoL2xvZ2luLmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcImF1dGgubG9naW5cIlxuICB9KS53aGVuKFwiL2xvZ291dFwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwidmlld3MvaG9tZS9pbmRleC5odG1sXCIsXG4gICAgcmVzb2x2ZToge1xuICAgICAgc2VjdXJlQWNjZXNzOiBmdW5jdGlvbiBzZWN1cmVBY2Nlc3MoYXV0aCwgJHdpbmRvdykge1xuICAgICAgICBpZiAoIWF1dGguaXNMb2dnZWRJbigpKSB7XG4gICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6IFwiYXV0aC5sb2dvdXRcIlxuICB9KS5vdGhlcndpc2Uoe1xuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICByZWRpcmVjdFRvOiBcIi9cIlxuICB9KTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5kaXJlY3RpdmUoXCJtYWluTWVudVwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9nZW5lcmFsL21haW4tbWVudS5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJnZW5lcmFsLm1haW4tbWVudVwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJmb290ZXJTZWN0aW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2dlbmVyYWwvZm9vdGVyLXNlY3Rpb24uaHRtbFwiLFxuICAgIGNvbnRyb2xsZXI6IFwiZ2VuZXJhbC5mb290ZXJcIlxuICB9O1xufSlcbi8vIC5kaXJlY3RpdmUoXCJoaWRlQWxsXCIsICgpID0+IHtcbi8vICAgcmV0dXJuIHtcbi8vICAgICByZXN0cmljdDogXCJBXCIsXG4vLyAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4vLyAgICAgICAkKGVsbSkub24oXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCcxJyk7XG4vLyAgICAgICAgICQoYXR0cnMuaGlkZUFsbCkuc2xpZGVVcCgxMDApO1xuLy8gICAgICAgfSk7XG4vLyAgICAgfVxuLy8gICB9O1xuLy8gfSlcbi5kaXJlY3RpdmUoXCJzbGlkZU5leHRcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKGVsbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF0dHJzLmhpZGVBbGwgJiYgJChhdHRycy5oaWRlQWxsKS5zbGlkZVVwKCk7XG4gICAgICAgICQoZWxtKS5uZXh0KCkuc3RvcCgpLnNsaWRlRG93bigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwibG9hZEZyYW1lXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgJChcImRvY3VtZW50XCIpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChlbG0pLmF0dHIoXCJzcmNcIiwgYXR0cnMuc291cmNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pLmRpcmVjdGl2ZShcInNjcm9sbFJpZ2h0XCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGF0dHJzLnRhcmdldCkuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsTGVmdDogXCIrPVwiICsgJChhdHRycy50YXJnZXQpLndpZHRoKClcbiAgICAgICAgfSwgcGFyc2VJbnQoYXR0cnMudGltZSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwic2Nyb2xsTGVmdFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChhdHRycy50YXJnZXQpLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbExlZnQ6IFwiLT1cIiArICQoYXR0cnMudGFyZ2V0KS53aWR0aCgpXG4gICAgICAgIH0sIHBhcnNlSW50KGF0dHJzLnRpbWUpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pLmRpcmVjdGl2ZShcInNjcm9sbFRvQ29udGFjdG9cIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKGVsbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbFRvcDogJChcImZvb3Rlci1zZWN0aW9uXCIpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA1MDApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwic2Nyb2xsVG9UYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKGVsbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbFRvcDogJChhdHRycy50YXJnZXQpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LCA3MDApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwiZXNjb25kZU1lbnVcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKGVsbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjbmF2YmFyXCIpLmNvbGxhcHNlKFwiaGlkZVwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pLmRpcmVjdGl2ZShcImZsb3RhbnRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA1MCkge1xuICAgICAgICAgIC8vIFtUQk1dXG4gICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk5Mikge1xuICAgICAgICAgICAgLy8gW1RCTV1cbiAgICAgICAgICAgICQoZWxtKS5hZGRDbGFzcyhcImZsb3RhbnRlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKGVsbSkucmVtb3ZlQ2xhc3MoXCJmbG90YW50ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJBdXRoTW9kdWxlXCIsIFtdKTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIkhvbWVNb2R1bGVcIiwgW10pLmNvbnRyb2xsZXIoXCJob21lLmluZGV4XCIsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XG4gICRodHRwLmdldChcIi9hc3NldHMvZGF0YS9ob21lL2hvbWUuanNvblwiKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7XG4gICAgJHNjb3BlLmNhYmVjZXJhID0gZGF0YS5jYWJlY2VyYTtcbiAgICAkc2NvcGUubGV5ZW5kb1R1TWVudGUgPSBkYXRhLmxleWVuZG9UdU1lbnRlO1xuICAgICRzY29wZS5pbWFnZW5FbXByZXNhID0gZGF0YS5pbWFnZW5FbXByZXNhO1xuICAgICRzY29wZS5lcXVpcG9NYXJrZXRpbmcgPSBkYXRhLmVxdWlwb01hcmtldGluZztcbiAgICAkc2NvcGUuZmVhdHVyZXNBcHAgPSBkYXRhLmZlYXR1cmVzQXBwO1xuICAgICRzY29wZS5iZW5lZmljaW9zID0gZGF0YS5iZW5lZmljaW9zO1xuICAgICRzY29wZS5haG9ycm8gPSBkYXRhLmFob3JybztcbiAgICAkc2NvcGUuZXF1aXBvQW50ID0gZGF0YS5lcXVpcG9BbnQ7XG5cbiAgICAkc2NvcGUuZmVhdHVyZXNJdGVtQWN0aXZvID0gJHNjb3BlLmZlYXR1cmVzQXBwLml0ZW1zWzBdO1xuICAgICRzY29wZS5lcXVpcG9JdGVtQWN0aXZvID0gJHNjb3BlLmVxdWlwb0FudC5pdGVtc1swXTtcbiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH0pO1xuXG4gICRzY29wZS5zZXRGZWF0dXJlc0l0ZW1BY3Rpdm8gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICRzY29wZS5mZWF0dXJlc0l0ZW1BY3Rpdm8gPSBpdGVtO1xuICB9O1xuICAkc2NvcGUuc2V0RXF1aXBvSXRlbUFjdGl2byA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgJHNjb3BlLmVxdWlwb0l0ZW1BY3Rpdm8gPSBpdGVtO1xuICB9O1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJIb21lTW9kdWxlXCIpLmRpcmVjdGl2ZShcImZhZGVJbk9uU2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjUgPj0gJChlbG0pLm9mZnNldCgpLnRvcCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsbSk7XG4gICAgICAgICAgJChlbG0pLmZpbmQoXCIuY3VlcnBvXCIpLmNzcyhcIm9wYWNpdHlcIikgPT0gMCAmJiAkKGVsbSkuZmluZChcIi5jdWVycG9cIikuYWRkQ2xhc3MoXCJmYWRlSW5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pLmRpcmVjdGl2ZShcImNhYmVjZXJhXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvY2FiZWNlcmEuaHRtbFwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJsZXllbmRvVHVNZW50ZVwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2xleWVuZG8tdHUtbWVudGUuaHRtbFwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJpbWFnZW5FbXByZXNhXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvaW1hZ2VuLWVtcHJlc2EuaHRtbFwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJlcXVpcG9NYXJrZXRpbmdcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9lcXVpcG8tbWFya2V0aW5nLmh0bWxcIlxuICB9O1xufSkuZGlyZWN0aXZlKFwiZmVhdHVyZXNBcHBcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9mZWF0dXJlcy1hcHAuaHRtbFwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJiZW5lZmljaW9zXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvYmVuZWZpY2lvcy5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImFob3Jyb1wiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2Fob3Jyby5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImVxdWlwb0FudFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2VxdWlwby1hbnQuaHRtbFwiXG4gIH07XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuZmFjdG9yeShcImF1dGhcIiwgZnVuY3Rpb24gKCRodHRwLCAkd2luZG93KSB7XG4gIHZhciBfZ2V0VG9rZW4gPSBmdW5jdGlvbiBfZ2V0VG9rZW4oKSB7XG4gICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlW1wiYW50LXRva2VuXCJdO1xuICB9O1xuXG4gIHZhciBzZWN1cmVLZXkgPSB7XG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIgKyBfZ2V0VG9rZW4oKVxuICAgIH1cbiAgfTtcbiAgdmFyIF9zYXZlVG9rZW4gPSBmdW5jdGlvbiBfc2F2ZVRva2VuKHRva2VuKSB7XG4gICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2VbXCJhbnQtdG9rZW5cIl0gPSB0b2tlbjtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBzYXZlVG9rZW46IGZ1bmN0aW9uIHNhdmVUb2tlbih0b2tlbikge1xuICAgICAgcmV0dXJuIF9zYXZlVG9rZW4odG9rZW4pO1xuICAgIH0sXG4gICAgZ2V0VG9rZW46IGZ1bmN0aW9uIGdldFRva2VuKCkge1xuICAgICAgcmV0dXJuIF9nZXRUb2tlbigpO1xuICAgIH0sXG4gICAgc2VjdXJlS2V5OiBzZWN1cmVLZXksXG4gICAgaXNMb2dnZWRJbjogZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcbiAgICAgIHZhciB0b2tlbiA9IF9nZXRUb2tlbigpO1xuICAgICAgdmFyIHBheWxvYWQgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBwYXlsb2FkID0gdG9rZW4uc3BsaXQoXCIuXCIpWzFdO1xuICAgICAgICBwYXlsb2FkID0gJHdpbmRvdy5hdG9iKHBheWxvYWQpO1xuICAgICAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkKTtcblxuICAgICAgICByZXR1cm4gcGF5bG9hZC5leHAgPiBEYXRlLm5vdygpIC8gMTAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcigpIHtcbiAgICAgIGlmIChpc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgdmFyIHRva2VuID0gX2dldFRva2VuKCk7XG4gICAgICAgIHZhciBwYXlsb2FkID0gdG9rZW4uc3BsaXQoXCIuXCIpWzFdO1xuICAgICAgICBwYXlsb2FkID0gJHdpbmRvdy5hdG9iKHBheWxvYWQpO1xuICAgICAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkKTtcbiAgICAgICAgcmV0dXJuIHsgZW1haWw6IHBheWxvYWQuZW1haWwsIG5hbWU6IHBheWxvYWQubmFtZSB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KFwiL2FwaS91c3Vhcmlvcy9sb2dpblwiLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBfc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImFudC10b2tlblwiKTtcbiAgICB9XG4gIH07XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuZmFjdG9yeShcImdldEFwaURhdGFcIiwgZnVuY3Rpb24gKCRodHRwLCAkcm9vdFNjb3BlKSB7XG4gIHZhciBnZXR0ZXIgPSBmdW5jdGlvbiBnZXR0ZXIodXJsKSB7XG4gICAgcmV0dXJuICRodHRwKHsgbWV0aG9kOiBcIkdFVFwiLCB1cmw6IHVybCB9KTtcbiAgfTtcblxuICByZXR1cm4ge307XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuZmFjdG9yeShcInN0b3JhZ2VcIiwgZnVuY3Rpb24gKCR3aW5kb3csICRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHt9O1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJBdXRoTW9kdWxlXCIpLmNvbnRyb2xsZXIoXCJhdXRoLmxvZ2luXCIsIGZ1bmN0aW9uICgkc2NvcGUsICR3aW5kb3csIGF1dGgpIHtcbiAgaWYgKCFhdXRoLmlzTG9nZ2VkSW4oKSkge1xuICAgICRzY29wZS5lbWFpbCA9IFwiXCI7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gXCJcIjtcbiAgICAkc2NvcGUuZmFpbExvZ2luID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuc2VuZEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBhdXRoLmxvZ2luKHsgZW1haWw6ICRzY29wZS5lbWFpbCwgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZCB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAkc2NvcGUuZmFpbExvZ2luID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIiMvXCI7XG4gICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIiMvXCI7XG4gICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxufSkuY29udHJvbGxlcihcImF1dGgubG9nb3V0XCIsIGZ1bmN0aW9uICgkc2NvcGUsICR3aW5kb3csIGF1dGgpIHtcbiAgYXV0aC5sb2dvdXQoKTtcbiAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJNYWluQXBwXCIpLmNvbnRyb2xsZXIoXCJnZW5lcmFsLm1haW4tbWVudVwiLCBmdW5jdGlvbiAoKSB7fSkuY29udHJvbGxlcihcImdlbmVyYWwuZm9vdGVyXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XG4gICRzY29wZS5zZW50ID0gZmFsc2U7XG4gICRzY29wZS5mb3JtY29udGFjdG8gPSB7XG4gICAgbm9tYnJlOiBcIlwiLFxuICAgIHRlbGVmb25vOiBcIlwiLFxuICAgIGVtYWlsOiBcIlwiLFxuICAgIGNvbnN1bHRhOiBcIlwiLFxuICAgIHNvbGljaXRhZG86IGZhbHNlXG4gIH07XG4gICRzY29wZS5mb3JtY29udGFjdG8uZW52aWFyID0gZnVuY3Rpb24gKCkge1xuICAgICRzY29wZS5zZW50ID0gdHJ1ZTtcbiAgICAkaHR0cC5wb3N0KFwiYXBpL21haWxpbmcvY29udGFjdG9cIiwge1xuICAgICAgbm9tYnJlOiAkc2NvcGUuZm9ybWNvbnRhY3RvLm5vbWJyZSxcbiAgICAgIHRlbGVmb25vOiAkc2NvcGUuZm9ybWNvbnRhY3RvLnRlbGVmb25vLFxuICAgICAgZW1haWw6ICRzY29wZS5mb3JtY29udGFjdG8uZW1haWwsXG4gICAgICBjb25zdWx0YTogJHNjb3BlLmZvcm1jb250YWN0by5jb25zdWx0YVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAkc2NvcGUuc2VudCA9IGZhbHNlO1xuICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5zb2xpY2l0YWRvID0gdHJ1ZTtcbiAgICAgICRzY29wZS5mb3JtY29udGFjdG8uZW52aW9Db3JyZWN0byA9IHRydWU7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAkc2NvcGUuc2VudCA9IGZhbHNlO1xuICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5zb2xpY2l0YWRvID0gdHJ1ZTtcbiAgICAgICRzY29wZS5mb3JtY29udGFjdG8uZW52aW9Db3JyZWN0byA9IGZhbHNlO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSk7XG4gIH07XG59KTsiLCJhbmd1bGFyXG4gIC5tb2R1bGUoXCJNYWluQXBwXCIsIFtcbiAgICBcIm5nUm91dGVcIixcbiAgICBcIm5nVG91Y2hcIixcbiAgICBcIkhvbWVNb2R1bGVcIixcbiAgICBcIkF1dGhNb2R1bGVcIlxuICBdKVxuICAuY29udHJvbGxlcihcbiAgICBcIm1haW5Db250cm9sbGVyXCIsXG4gICAgKCRsb2NhdGlvbiwgJHJvb3RTY29wZSwgJHdpbmRvdywgYXV0aCkgPT4ge1xuXG4gICAgICAkcm9vdFNjb3BlLmlzTW9iaWxlID0gJHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2ODtcblxuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJyZXNpemVcIiwgKCkgPT4ge1xuICAgICAgICAkcm9vdFNjb3BlLmlzTW9iaWxlID0gJHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2ODtcbiAgICAgICAgJHJvb3RTY29wZS4kJHBoYXNlIHx8ICRyb290U2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oXCIkcm91dGVDaGFuZ2VTdWNjZXNzXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGJvZHlDbGFzcyA9IFwiXCI7XG5cbiAgICAgICAgbGV0IHBhdGggPSAkbG9jYXRpb24uJCRwYXRoLnNwbGl0KFwiL1wiKTtcblxuICAgICAgICBwYXRoLm1hcCh0cmFtbyA9PiB7XG4gICAgICAgICAgaWYgKHRyYW1vICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBib2R5Q2xhc3MgKz0gYC0ke3RyYW1vfWA7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkcm9vdFNjb3BlLmJvZHlDbGFzcyA9XG4gICAgICAgICAgYm9keUNsYXNzICE9PSBcIlwiID8gYHBhZ2Uke2JvZHlDbGFzc31gIDogXCJwYWdlLWhvbWVcIjtcbiAgICAgIH0pO1xuICAgIH1cbiAgKVxuICAuZmlsdGVyKFwicHJlY2lvXCIsICgpID0+IHtcbiAgICByZXR1cm4gaW5wdXQgPT4ge1xuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGlucHV0KS50b0ZpeGVkKDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgfSlcbiAgLmZpbHRlcihcImVuY29kZXVybFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIGlucHV0ID0+IHtcbiAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gd2luZG93LmVuY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICB9KVxuICAuZmlsdGVyKFwicmVtb3ZlVHJhaWxpbmdTbGFzaFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIGlucHV0ID0+IHtcbiAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXRbMF0gPT09IFwiL1wiKSByZXR1cm4gaW5wdXQuc2xpY2UoMSk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGlucHV0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuY29uZmlnKCgkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpID0+IHtcbiAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeChcIlwiKTtcblxuICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKFwiL1wiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9pbmRleC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcImhvbWUuaW5kZXhcIlxuICAgIH0pXG4gICAgLndoZW4oXCIvY2Fycml0b1wiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvY2Fycml0by9pbmRleC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcImNhcnJpdG8uaW5kZXhcIlxuICAgIH0pXG4gICAgLndoZW4oXCIvcHJvZHVjdG9zXCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9wcm9kdWN0b3MvaW5kZXguaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJwcm9kdWN0b3MuaW5kZXhcIlxuICAgIH0pXG4gICAgLndoZW4oXCIvcHJvZHVjdG9zLzppZFwiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvcHJvZHVjdG9zL3Nob3cuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJwcm9kdWN0b3Muc2hvd1wiXG4gICAgfSlcblxuICAgIFxuXG4gICAgLndoZW4oXCIvbG9naW5cIiwge1xuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2F1dGgvbG9naW4uaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJhdXRoLmxvZ2luXCJcbiAgICB9KVxuICAgIC53aGVuKFwiL2xvZ291dFwiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgc2VjdXJlQWNjZXNzOiAoYXV0aCwgJHdpbmRvdykgPT4ge1xuICAgICAgICAgIGlmICghYXV0aC5pc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogXCJhdXRoLmxvZ291dFwiXG4gICAgfSlcblxuICAgIFxuXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9pbmRleC5odG1sXCIsXG4gICAgICByZWRpcmVjdFRvOiBcIi9cIlxuICAgIH0pO1xufSk7XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoXCJNYWluQXBwXCIpXG4gIC5kaXJlY3RpdmUoXCJtYWluTWVudVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9nZW5lcmFsL21haW4tbWVudS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcImdlbmVyYWwubWFpbi1tZW51XCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiZm9vdGVyU2VjdGlvblwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9nZW5lcmFsL2Zvb3Rlci1zZWN0aW9uLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwiZ2VuZXJhbC5mb290ZXJcIlxuICAgIH07XG4gIH0pXG4gIC8vIC5kaXJlY3RpdmUoXCJoaWRlQWxsXCIsICgpID0+IHtcbiAgLy8gICByZXR1cm4ge1xuICAvLyAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAvLyAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gIC8vICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZygnMScpO1xuICAvLyAgICAgICAgICQoYXR0cnMuaGlkZUFsbCkuc2xpZGVVcCgxMDApO1xuICAvLyAgICAgICB9KTtcbiAgLy8gICAgIH1cbiAgLy8gICB9O1xuICAvLyB9KVxuICAuZGlyZWN0aXZlKFwic2xpZGVOZXh0XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICBhdHRycy5oaWRlQWxsICYmICQoYXR0cnMuaGlkZUFsbCkuc2xpZGVVcCgpO1xuICAgICAgICAgICQoZWxtKVxuICAgICAgICAgICAgLm5leHQoKVxuICAgICAgICAgICAgLnN0b3AoKVxuICAgICAgICAgICAgLnNsaWRlRG93bigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwibG9hZEZyYW1lXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoXCJkb2N1bWVudFwiKS5yZWFkeSgoKSA9PiB7XG4gICAgICAgICAgJChlbG0pLmF0dHIoXCJzcmNcIiwgYXR0cnMuc291cmNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcInNjcm9sbFJpZ2h0XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAkKGF0dHJzLnRhcmdldCkuYW5pbWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogXCIrPVwiICsgJChhdHRycy50YXJnZXQpLndpZHRoKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJzZUludChhdHRycy50aW1lKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJzY3JvbGxMZWZ0XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAkKGF0dHJzLnRhcmdldCkuYW5pbWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogXCItPVwiICsgJChhdHRycy50YXJnZXQpLndpZHRoKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJzZUludChhdHRycy50aW1lKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJzY3JvbGxUb0NvbnRhY3RvXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAkKFwiYm9keSwgaHRtbFwiKS5hbmltYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCJmb290ZXItc2VjdGlvblwiKS5vZmZzZXQoKS50b3BcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA1MDBcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwic2Nyb2xsVG9UYXJnZXRcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNjcm9sbFRvcDogJChhdHRycy50YXJnZXQpLm9mZnNldCgpLnRvcFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDcwMFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJlc2NvbmRlTWVudVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICAgIGxpbms6IChzY29wZSwgZWxtLCBhdHRycykgPT4ge1xuICAgICAgICAkKGVsbSkub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgJChcIiNuYXZiYXJcIikuY29sbGFwc2UoXCJoaWRlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiZmxvdGFudGVcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGUgPT4ge1xuICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA1MCkge1xuICAgICAgICAgICAgLy8gW1RCTV1cbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5OTIpIHtcbiAgICAgICAgICAgICAgLy8gW1RCTV1cbiAgICAgICAgICAgICAgJChlbG0pLmFkZENsYXNzKFwiZmxvdGFudGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZWxtKS5yZW1vdmVDbGFzcyhcImZsb3RhbnRlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIkF1dGhNb2R1bGVcIiwgW10pO1xuIiwiYW5ndWxhci5tb2R1bGUoXCJIb21lTW9kdWxlXCIsIFtdKS5jb250cm9sbGVyKFwiaG9tZS5pbmRleFwiLCAoJHNjb3BlLCAkaHR0cCkgPT4ge1xuICAkaHR0cC5nZXQoXCIvYXNzZXRzL2RhdGEvaG9tZS9ob21lLmpzb25cIikudGhlbihcbiAgICAoeyBkYXRhIH0pID0+IHtcbiAgICAgICh7XG4gICAgICAgIGNhYmVjZXJhOiAkc2NvcGUuY2FiZWNlcmEsXG4gICAgICAgIGxleWVuZG9UdU1lbnRlOiAkc2NvcGUubGV5ZW5kb1R1TWVudGUsXG4gICAgICAgIGltYWdlbkVtcHJlc2E6ICRzY29wZS5pbWFnZW5FbXByZXNhLFxuICAgICAgICBlcXVpcG9NYXJrZXRpbmc6ICRzY29wZS5lcXVpcG9NYXJrZXRpbmcsXG4gICAgICAgIGZlYXR1cmVzQXBwOiAkc2NvcGUuZmVhdHVyZXNBcHAsXG4gICAgICAgIGJlbmVmaWNpb3M6ICRzY29wZS5iZW5lZmljaW9zLFxuICAgICAgICBhaG9ycm86ICRzY29wZS5haG9ycm8sXG4gICAgICAgIGVxdWlwb0FudDogJHNjb3BlLmVxdWlwb0FudFxuICAgICAgfSA9IGRhdGEpO1xuICAgICAgJHNjb3BlLmZlYXR1cmVzSXRlbUFjdGl2byA9ICRzY29wZS5mZWF0dXJlc0FwcC5pdGVtc1swXTtcbiAgICAgICRzY29wZS5lcXVpcG9JdGVtQWN0aXZvID0gJHNjb3BlLmVxdWlwb0FudC5pdGVtc1swXTtcbiAgICB9LFxuICAgIGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgKTtcblxuICAkc2NvcGUuc2V0RmVhdHVyZXNJdGVtQWN0aXZvID0gaXRlbSA9PiB7XG4gICAgJHNjb3BlLmZlYXR1cmVzSXRlbUFjdGl2byA9IGl0ZW07XG4gIH07XG4gICRzY29wZS5zZXRFcXVpcG9JdGVtQWN0aXZvID0gaXRlbSA9PiB7XG4gICAgJHNjb3BlLmVxdWlwb0l0ZW1BY3Rpdm8gPSBpdGVtO1xuICB9O1xufSk7XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoXCJIb21lTW9kdWxlXCIpXG4gIC5kaXJlY3RpdmUoXCJmYWRlSW5PblNjcm9sbFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICAgIGxpbms6IChzY29wZSwgZWxtLCBhdHRycykgPT4ge1xuICAgICAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgd2luZG93LmlubmVySGVpZ2h0ICogMC41ID49XG4gICAgICAgICAgICAkKGVsbSkub2Zmc2V0KCkudG9wXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbG0pO1xuICAgICAgICAgICAgJChlbG0pXG4gICAgICAgICAgICAgIC5maW5kKFwiLmN1ZXJwb1wiKVxuICAgICAgICAgICAgICAuY3NzKFwib3BhY2l0eVwiKSA9PSAwICYmXG4gICAgICAgICAgICAgICQoZWxtKVxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmN1ZXJwb1wiKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImZhZGVJblwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJjYWJlY2VyYVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2NhYmVjZXJhLmh0bWxcIlxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJsZXllbmRvVHVNZW50ZVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2xleWVuZG8tdHUtbWVudGUuaHRtbFwiXG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImltYWdlbkVtcHJlc2FcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9pbWFnZW4tZW1wcmVzYS5odG1sXCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiZXF1aXBvTWFya2V0aW5nXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvZXF1aXBvLW1hcmtldGluZy5odG1sXCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiZmVhdHVyZXNBcHBcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9mZWF0dXJlcy1hcHAuaHRtbFwiXG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImJlbmVmaWNpb3NcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9iZW5lZmljaW9zLmh0bWxcIlxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJhaG9ycm9cIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9haG9ycm8uaHRtbFwiXG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImVxdWlwb0FudFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2VxdWlwby1hbnQuaHRtbFwiXG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuZmFjdG9yeShcImF1dGhcIiwgKCRodHRwLCAkd2luZG93KSA9PiB7XG4gIGNvbnN0IGdldFRva2VuID0gKCkgPT4gJHdpbmRvdy5sb2NhbFN0b3JhZ2VbXCJhbnQtdG9rZW5cIl07XG5cbiAgY29uc3Qgc2VjdXJlS2V5ID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IFwiQmVhcmVyIFwiICsgZ2V0VG9rZW4oKVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2F2ZVRva2VuID0gdG9rZW4gPT4ge1xuICAgICR3aW5kb3cubG9jYWxTdG9yYWdlW1wiYW50LXRva2VuXCJdID0gdG9rZW47XG4gIH07XG4gIHJldHVybiB7XG4gICAgc2F2ZVRva2VuOiB0b2tlbiA9PiBzYXZlVG9rZW4odG9rZW4pLFxuICAgIGdldFRva2VuOiAoKSA9PiBnZXRUb2tlbigpLFxuICAgIHNlY3VyZUtleTogc2VjdXJlS2V5LFxuICAgIGlzTG9nZ2VkSW46ICgpID0+IHtcbiAgICAgIGxldCB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgICBsZXQgcGF5bG9hZDtcblxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHBheWxvYWQgPSB0b2tlbi5zcGxpdChcIi5cIilbMV07XG4gICAgICAgIHBheWxvYWQgPSAkd2luZG93LmF0b2IocGF5bG9hZCk7XG4gICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuXG4gICAgICAgIHJldHVybiBwYXlsb2FkLmV4cCA+IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3VycmVudFVzZXI6ICgpID0+IHtcbiAgICAgIGlmIChpc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgbGV0IHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICAgICAgbGV0IHBheWxvYWQgPSB0b2tlbi5zcGxpdChcIi5cIilbMV07XG4gICAgICAgIHBheWxvYWQgPSAkd2luZG93LmF0b2IocGF5bG9hZCk7XG4gICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuICAgICAgICByZXR1cm4geyBlbWFpbDogcGF5bG9hZC5lbWFpbCwgbmFtZTogcGF5bG9hZC5uYW1lIH07XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2dpbjogdXNlciA9PlxuICAgICAgJGh0dHAucG9zdChcIi9hcGkvdXN1YXJpb3MvbG9naW5cIiwgdXNlcikudGhlbihcbiAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHNhdmVUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICBsb2dvdXQ6ICgpID0+IHtcbiAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJhbnQtdG9rZW5cIik7XG4gICAgfVxuICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuZmFjdG9yeShcImdldEFwaURhdGFcIiwgKCRodHRwLCAkcm9vdFNjb3BlKSA9PiB7XG4gIGNvbnN0IGdldHRlciA9IHVybCA9PiB7XG4gICAgcmV0dXJuICRodHRwKHsgbWV0aG9kOiBcIkdFVFwiLCB1cmw6IHVybCB9KTtcbiAgfTtcblxuICByZXR1cm4ge307XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwic3RvcmFnZVwiLCAoJHdpbmRvdywgJHJvb3RTY29wZSkgPT4ge1xuICByZXR1cm4ge307XG59KTtcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZShcIkF1dGhNb2R1bGVcIilcbiAgLmNvbnRyb2xsZXIoXCJhdXRoLmxvZ2luXCIsICgkc2NvcGUsICR3aW5kb3csIGF1dGgpID0+IHtcbiAgICBpZiAoIWF1dGguaXNMb2dnZWRJbigpKSB7XG4gICAgICAkc2NvcGUuZW1haWwgPSBcIlwiO1xuICAgICAgJHNjb3BlLnBhc3N3b3JkID0gXCJcIjtcbiAgICAgICRzY29wZS5mYWlsTG9naW4gPSBmYWxzZTtcblxuICAgICAgJHNjb3BlLnNlbmRGb3JtID0gKCkgPT4ge1xuICAgICAgICBhdXRoXG4gICAgICAgICAgLmxvZ2luKHsgZW1haWw6ICRzY29wZS5lbWFpbCwgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZCB9KVxuICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAkc2NvcGUuZmFpbExvZ2luID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuICB9KVxuICAuY29udHJvbGxlcihcImF1dGgubG9nb3V0XCIsICgkc2NvcGUsICR3aW5kb3csIGF1dGgpID0+IHtcbiAgICBhdXRoLmxvZ291dCgpO1xuICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9KTtcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZShcIk1haW5BcHBcIilcbiAgLmNvbnRyb2xsZXIoXCJnZW5lcmFsLm1haW4tbWVudVwiLCAoKSA9PiB7fSlcbiAgLmNvbnRyb2xsZXIoXCJnZW5lcmFsLmZvb3RlclwiLCAoJHNjb3BlLCAkaHR0cCkgPT4ge1xuICAgICRzY29wZS5zZW50ID0gZmFsc2U7XG4gICAgJHNjb3BlLmZvcm1jb250YWN0byA9IHtcbiAgICAgIG5vbWJyZTogXCJcIixcbiAgICAgIHRlbGVmb25vOiBcIlwiLFxuICAgICAgZW1haWw6IFwiXCIsXG4gICAgICBjb25zdWx0YTogXCJcIixcbiAgICAgIHNvbGljaXRhZG86IGZhbHNlXG4gICAgfTtcbiAgICAkc2NvcGUuZm9ybWNvbnRhY3RvLmVudmlhciA9ICgpID0+IHtcbiAgICAgICRzY29wZS5zZW50ID0gdHJ1ZTtcbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KFwiYXBpL21haWxpbmcvY29udGFjdG9cIiwge1xuICAgICAgICAgIG5vbWJyZTogJHNjb3BlLmZvcm1jb250YWN0by5ub21icmUsXG4gICAgICAgICAgdGVsZWZvbm86ICRzY29wZS5mb3JtY29udGFjdG8udGVsZWZvbm8sXG4gICAgICAgICAgZW1haWw6ICRzY29wZS5mb3JtY29udGFjdG8uZW1haWwsXG4gICAgICAgICAgY29uc3VsdGE6ICRzY29wZS5mb3JtY29udGFjdG8uY29uc3VsdGFcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oXG4gICAgICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgJHNjb3BlLnNlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5mb3JtY29udGFjdG8uc29saWNpdGFkbyA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuZm9ybWNvbnRhY3RvLmVudmlvQ29ycmVjdG8gPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgJHNjb3BlLnNlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5mb3JtY29udGFjdG8uc29saWNpdGFkbyA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuZm9ybWNvbnRhY3RvLmVudmlvQ29ycmVjdG8gPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9O1xuICB9KTtcbiJdfQ==
