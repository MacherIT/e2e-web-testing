"use strict";angular.module("MainApp",["ngRoute","ngTouch","HomeModule","AuthModule"]).controller("mainController",["$location","$rootScope","$window","auth",function(e,o,t,n){o.isMobile=t.innerWidth<=768,angular.element(t).bind("resize",function(){o.isMobile=t.innerWidth<=768,o.$$phase||o.$apply()}),o.$on("$routeChangeSuccess",function(){var t="";e.$$path.split("/").map(function(e){""!==e&&(t+="-"+e)}),o.bodyClass=""!==t?"page"+t:"page-home"})}]).filter("precio",function(){return function(e){return e?parseFloat(e).toFixed(2):""}}).filter("encodeurl",function(){return function(e){return e?window.encodeURIComponent(e):""}}).filter("removeTrailingSlash",function(){return function(e){return e?"/"===e[0]?e.slice(1):e:""}}),angular.module("MainApp").config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"/views/home/index.html",controller:"home.index"}).when("/carrito",{templateUrl:"/views/carrito/index.html",controller:"carrito.index"}).when("/productos",{templateUrl:"/views/productos/index.html",controller:"productos.index"}).when("/productos/:id",{templateUrl:"/views/productos/show.html",controller:"productos.show"}).when("/login",{templateUrl:"/views/auth/login.html",controller:"auth.login"}).when("/logout",{templateUrl:"views/home/index.html",resolve:{secureAccess:["auth","$window",function(e,t){e.isLoggedIn()||(t.location.href="#/",t.location.reload())}]},controller:"auth.logout"}).otherwise({templateUrl:"/views/home/index.html",redirectTo:"/"})}]),angular.module("MainApp").directive("mainMenu",function(){return{restrict:"E",templateUrl:"/views/general/main-menu.html",controller:"general.main-menu"}}).directive("footerSection",function(){return{restrict:"E",templateUrl:"/views/general/footer-section.html",controller:"general.footer"}}).directive("slideNext",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){o.hideAll&&$(o.hideAll).slideUp(),$(t).next().stop().slideDown()})}}}).directive("loadFrame",function(){return{restrict:"A",link:function(e,t,o){$("document").ready(function(){$(t).attr("src",o.source)})}}}).directive("scrollRight",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(o.target).animate({scrollLeft:"+="+$(o.target).width()},parseInt(o.time))})}}}).directive("scrollLeft",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(o.target).animate({scrollLeft:"-="+$(o.target).width()},parseInt(o.time))})}}}).directive("scrollToContacto",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("body, html").animate({scrollTop:$("footer-section").offset().top},500)})}}}).directive("scrollToTarget",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("body, html").animate({scrollTop:$(o.target).offset().top},700)})}}}).directive("escondeMenu",function(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$("#navbar").collapse("hide")})}}}).directive("flotante",function(){return{restrict:"A",link:function(e,t,o){$(window).on("scroll",function(e){50<$(window).scrollTop()?$(window).width()<=992&&$(t).addClass("flotante"):$(t).removeClass("flotante")})}}}),angular.module("AuthModule",[]),angular.module("HomeModule",[]).controller("home.index",["$scope","$http",function(o,e){e.get("/assets/data/home/home.json").then(function(e){var t=e.data;o.cabecera=t.cabecera,o.leyendoTuMente=t.leyendoTuMente,o.imagenEmpresa=t.imagenEmpresa,o.equipoMarketing=t.equipoMarketing,o.featuresApp=t.featuresApp,o.beneficios=t.beneficios,o.ahorro=t.ahorro,o.equipoAnt=t.equipoAnt,o.featuresItemActivo=o.featuresApp.items[0],o.equipoItemActivo=o.equipoAnt.items[0]},function(e){console.error(e)}),o.setFeaturesItemActivo=function(e){o.featuresItemActivo=e},o.setEquipoItemActivo=function(e){o.equipoItemActivo=e}}]),angular.module("HomeModule").directive("fadeInOnScroll",function(){return{restrict:"A",link:function(e,t,o){$(window).on("scroll",function(e){$(window).scrollTop()+.5*window.innerHeight>=$(t).offset().top&&0==$(t).find(".cuerpo").css("opacity")&&$(t).find(".cuerpo").addClass("fadeIn")})}}}).directive("cabecera",function(){return{restrict:"E",templateUrl:"/views/home/cabecera.html"}}).directive("leyendoTuMente",function(){return{restrict:"E",templateUrl:"/views/home/leyendo-tu-mente.html"}}).directive("imagenEmpresa",function(){return{restrict:"E",templateUrl:"/views/home/imagen-empresa.html"}}).directive("equipoMarketing",function(){return{restrict:"E",templateUrl:"/views/home/equipo-marketing.html"}}).directive("featuresApp",function(){return{restrict:"E",templateUrl:"/views/home/features-app.html"}}).directive("beneficios",function(){return{restrict:"E",templateUrl:"/views/home/beneficios.html"}}).directive("ahorro",function(){return{restrict:"E",templateUrl:"/views/home/ahorro.html"}}).directive("equipoAnt",function(){return{restrict:"E",templateUrl:"/views/home/equipo-ant.html"}}),angular.module("MainApp").factory("auth",["$http","$window",function(t,o){var n=function(){return o.localStorage["ant-token"]},e={headers:{Authorization:"Bearer "+n()}},r=function(e){o.localStorage["ant-token"]=e};return{saveToken:function(e){return r(e)},getToken:function(){return n()},secureKey:e,isLoggedIn:function(){var e=n(),t=void 0;return!!e&&(t=e.split(".")[1],t=o.atob(t),(t=JSON.parse(t)).exp>Date.now()/1e3)},currentUser:function(){if(isLoggedIn()){var e=n().split(".")[1];return e=o.atob(e),{email:(e=JSON.parse(e)).email,name:e.name}}},login:function(e){return t.post("/api/usuarios/login",e).then(function(e){return r(e.data.token),e},function(e){return e})},logout:function(){o.localStorage.removeItem("ant-token")}}}]),angular.module("MainApp").factory("getApiData",["$http","$rootScope",function(e,t){return{}}]),angular.module("MainApp").factory("storage",["$window","$rootScope",function(e,t){return{}}]),angular.module("AuthModule").controller("auth.login",["$scope","$window","auth",function(t,o,e){e.isLoggedIn()?(o.location.href="#/",o.location.reload()):(t.email="",t.password="",t.failLogin=!1,t.sendForm=function(){e.login({email:t.email,password:t.password}).then(function(e){401===e.status?t.failLogin=!0:(o.location.href="#/",o.location.reload())})})}]).controller("auth.logout",["$scope","$window","auth",function(e,t,o){o.logout(),t.location.href="#/",t.location.reload()}]),angular.module("MainApp").controller("general.main-menu",function(){}).controller("general.footer",["$scope","$http",function(t,e){t.sent=!1,t.formcontacto={nombre:"",telefono:"",email:"",consulta:"",solicitado:!1},t.formcontacto.enviar=function(){t.sent=!0,e.post("api/mailing/contacto",{nombre:t.formcontacto.nombre,telefono:t.formcontacto.telefono,email:t.formcontacto.email,consulta:t.formcontacto.consulta}).then(function(e){t.sent=!1,t.formcontacto.solicitado=!0,t.formcontacto.envioCorrecto=!0},function(e){t.sent=!1,t.formcontacto.solicitado=!0,t.formcontacto.envioCorrecto=!1,console.error(e)})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRpYy9zaXRlL2pzL2FwcC5taW4uanMiLCJtYWluLmpzIiwicm91dGVzLmpzIiwiZGlyZWN0aXZlcy9tYWluLmpzIiwiY29udHJvbGxlcnMvYXV0aC9pbmRleC5qcyIsImNvbnRyb2xsZXJzL2hvbWUvaW5kZXguanMiLCJkaXJlY3RpdmVzL2hvbWUvZGlyZWN0aXZlcy5qcyIsInNlcnZpY2VzL19hdXRoLmpzIiwic2VydmljZXMvX2dldC1hcGktZGF0YS5qcyIsInNlcnZpY2VzL19zdG9yYWdlLmpzIiwiY29udHJvbGxlcnMvYXV0aC9fbG9naW4uanMiLCJjb250cm9sbGVycy9nZW5lcmFsL19nZW5lcmFsLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGxvY2F0aW9uIiwiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCJhdXRoIiwiaXNNb2JpbGUiLCJpbm5lcldpZHRoIiwiZWxlbWVudCIsImJpbmQiLCIkJHBoYXNlIiwiJGFwcGx5IiwiJG9uIiwiYm9keUNsYXNzIiwiJCRwYXRoIiwic3BsaXQiLCJtYXAiLCJ0cmFtbyIsImZpbHRlciIsImlucHV0IiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJ3aW5kb3ciLCJlbmNvZGVVUklDb21wb25lbnQiLCJzbGljZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJoYXNoUHJlZml4Iiwid2hlbiIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInNlY3VyZUFjY2VzcyIsImlzTG9nZ2VkSW4iLCJsb2NhdGlvbiIsImhyZWYiLCJyZWxvYWQiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbG0iLCJhdHRycyIsIiQiLCJvbiIsImhpZGVBbGwiLCJzbGlkZVVwIiwibmV4dCIsInN0b3AiLCJzbGlkZURvd24iLCJyZWFkeSIsImF0dHIiLCJzb3VyY2UiLCJ0YXJnZXQiLCJhbmltYXRlIiwic2Nyb2xsTGVmdCIsIndpZHRoIiwicGFyc2VJbnQiLCJ0aW1lIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwiY29sbGFwc2UiLCJlIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIiRzY29wZSIsIiRodHRwIiwiZ2V0IiwidGhlbiIsIl9yZWYiLCJkYXRhIiwiY2FiZWNlcmEiLCJsZXllbmRvVHVNZW50ZSIsImltYWdlbkVtcHJlc2EiLCJlcXVpcG9NYXJrZXRpbmciLCJmZWF0dXJlc0FwcCIsImJlbmVmaWNpb3MiLCJhaG9ycm8iLCJlcXVpcG9BbnQiLCJmZWF0dXJlc0l0ZW1BY3Rpdm8iLCJpdGVtcyIsImVxdWlwb0l0ZW1BY3Rpdm8iLCJlcnJvciIsImNvbnNvbGUiLCJzZXRGZWF0dXJlc0l0ZW1BY3Rpdm8iLCJpdGVtIiwic2V0RXF1aXBvSXRlbUFjdGl2byIsImlubmVySGVpZ2h0IiwiZmluZCIsImNzcyIsImZhY3RvcnkiLCJnZXRUb2tlbiIsImxvY2FsU3RvcmFnZSIsInNlY3VyZUtleSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic2F2ZVRva2VuIiwidG9rZW4iLCJwYXlsb2FkIiwiYXRvYiIsIkpTT04iLCJwYXJzZSIsImV4cCIsIkRhdGUiLCJub3ciLCJjdXJyZW50VXNlciIsImVtYWlsIiwibmFtZSIsImxvZ2luIiwidXNlciIsInBvc3QiLCJyZXNwb25zZSIsImVyciIsImxvZ291dCIsInJlbW92ZUl0ZW0iLCJwYXNzd29yZCIsImZhaWxMb2dpbiIsInNlbmRGb3JtIiwic3RhdHVzIiwic2VudCIsImZvcm1jb250YWN0byIsIm5vbWJyZSIsInRlbGVmb25vIiwiY29uc3VsdGEiLCJzb2xpY2l0YWRvIiwiZW52aWFyIiwiZW52aW9Db3JyZWN0byJdLCJtYXBwaW5ncyI6IkFBQUEsYUNBQUEsUUFDR0MsT0FBTyxXQUNOLFVBQ0EsVUFDQSxhQUNBLGVBRURDLFdBQ0Msa0JBQUEsWUFBQSxhQUFBLFVBQUEsT0FDQSxTQUFDQyxFQUFXQyxFQUFZQyxFQUFTQyxH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QWdCLEVBQ3BDM0MsUUFBUUQsTUFBTUEiLCJmaWxlIjoic3RhdGljL3NpdGUvanMvYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIiwgW1wibmdSb3V0ZVwiLCBcIm5nVG91Y2hcIiwgXCJIb21lTW9kdWxlXCIsIFwiQXV0aE1vZHVsZVwiXSkuY29udHJvbGxlcihcIm1haW5Db250cm9sbGVyXCIsIGZ1bmN0aW9uICgkbG9jYXRpb24sICRyb290U2NvcGUsICR3aW5kb3csIGF1dGgpIHtcblxuICAkcm9vdFNjb3BlLmlzTW9iaWxlID0gJHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2ODtcblxuICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZChcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJHJvb3RTY29wZS5pc01vYmlsZSA9ICR3aW5kb3cuaW5uZXJXaWR0aCA8PSA3Njg7XG4gICAgJHJvb3RTY29wZS4kJHBoYXNlIHx8ICRyb290U2NvcGUuJGFwcGx5KCk7XG4gIH0pO1xuXG4gICRyb290U2NvcGUuJG9uKFwiJHJvdXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJvZHlDbGFzcyA9IFwiXCI7XG5cbiAgICB2YXIgcGF0aCA9ICRsb2NhdGlvbi4kJHBhdGguc3BsaXQoXCIvXCIpO1xuXG4gICAgcGF0aC5tYXAoZnVuY3Rpb24gKHRyYW1vKSB7XG4gICAgICBpZiAodHJhbW8gIT09IFwiXCIpIHtcbiAgICAgICAgYm9keUNsYXNzICs9IFwiLVwiICsgdHJhbW87XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLmJvZHlDbGFzcyA9IGJvZHlDbGFzcyAhPT0gXCJcIiA/IFwicGFnZVwiICsgYm9keUNsYXNzIDogXCJwYWdlLWhvbWVcIjtcbiAgfSk7XG59KS5maWx0ZXIoXCJwcmVjaW9cIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKGlucHV0KSB7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChpbnB1dCkudG9GaXhlZCgyKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG4gIH07XG59KS5maWx0ZXIoXCJlbmNvZGV1cmxcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKGlucHV0KSB7XG4gICAgICByZXR1cm4gd2luZG93LmVuY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9O1xufSkuZmlsdGVyKFwicmVtb3ZlVHJhaWxpbmdTbGFzaFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlmIChpbnB1dFswXSA9PT0gXCIvXCIpIHJldHVybiBpbnB1dC5zbGljZSgxKTtlbHNlIHJldHVybiBpbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG4gIH07XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeChcIlwiKTtcblxuICAkcm91dGVQcm92aWRlci53aGVuKFwiL1wiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvaW5kZXguaHRtbFwiLFxuICAgIGNvbnRyb2xsZXI6IFwiaG9tZS5pbmRleFwiXG4gIH0pLndoZW4oXCIvY2Fycml0b1wiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2NhcnJpdG8vaW5kZXguaHRtbFwiLFxuICAgIGNvbnRyb2xsZXI6IFwiY2Fycml0by5pbmRleFwiXG4gIH0pLndoZW4oXCIvcHJvZHVjdG9zXCIsIHtcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvcHJvZHVjdG9zL2luZGV4Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcInByb2R1Y3Rvcy5pbmRleFwiXG4gIH0pLndoZW4oXCIvcHJvZHVjdG9zLzppZFwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL3Byb2R1Y3Rvcy9zaG93Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcInByb2R1Y3Rvcy5zaG93XCJcbiAgfSkud2hlbihcIi9sb2dpblwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2F1dGgvbG9naW4uaHRtbFwiLFxuICAgIGNvbnRyb2xsZXI6IFwiYXV0aC5sb2dpblwiXG4gIH0pLndoZW4oXCIvbG9nb3V0XCIsIHtcbiAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICByZXNvbHZlOiB7XG4gICAgICBzZWN1cmVBY2Nlc3M6IGZ1bmN0aW9uIHNlY3VyZUFjY2VzcyhhdXRoLCAkd2luZG93KSB7XG4gICAgICAgIGlmICghYXV0aC5pc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIiMvXCI7XG4gICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY29udHJvbGxlcjogXCJhdXRoLmxvZ291dFwiXG4gIH0pLm90aGVyd2lzZSh7XG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvaW5kZXguaHRtbFwiLFxuICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gIH0pO1xufSk7XG5cInVzZSBzdHJpY3RcIjtcblxuYW5ndWxhci5tb2R1bGUoXCJNYWluQXBwXCIpLmRpcmVjdGl2ZShcIm1haW5NZW51XCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2dlbmVyYWwvbWFpbi1tZW51Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcImdlbmVyYWwubWFpbi1tZW51XCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImZvb3RlclNlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvZ2VuZXJhbC9mb290ZXItc2VjdGlvbi5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJnZW5lcmFsLmZvb3RlclwiXG4gIH07XG59KVxuLy8gLmRpcmVjdGl2ZShcImhpZGVBbGxcIiwgKCkgPT4ge1xuLy8gICByZXR1cm4ge1xuLy8gICAgIHJlc3RyaWN0OiBcIkFcIixcbi8vICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbi8vICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJzEnKTtcbi8vICAgICAgICAgJChhdHRycy5oaWRlQWxsKS5zbGlkZVVwKDEwMCk7XG4vLyAgICAgICB9KTtcbi8vICAgICB9XG4vLyAgIH07XG4vLyB9KVxuLmRpcmVjdGl2ZShcInNsaWRlTmV4dFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXR0cnMuaGlkZUFsbCAmJiAkKGF0dHJzLmhpZGVBbGwpLnNsaWRlVXAoKTtcbiAgICAgICAgJChlbG0pLm5leHQoKS5zdG9wKCkuc2xpZGVEb3duKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KS5kaXJlY3RpdmUoXCJsb2FkRnJhbWVcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKFwiZG9jdW1lbnRcIikucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGVsbSkuYXR0cihcInNyY1wiLCBhdHRycy5zb3VyY2UpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwic2Nyb2xsUmlnaHRcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKGVsbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoYXR0cnMudGFyZ2V0KS5hbmltYXRlKHtcbiAgICAgICAgICBzY3JvbGxMZWZ0OiBcIis9XCIgKyAkKGF0dHJzLnRhcmdldCkud2lkdGgoKVxuICAgICAgICB9LCBwYXJzZUludChhdHRycy50aW1lKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KS5kaXJlY3RpdmUoXCJzY3JvbGxMZWZ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxtLCBhdHRycykge1xuICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGF0dHJzLnRhcmdldCkuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsTGVmdDogXCItPVwiICsgJChhdHRycy50YXJnZXQpLndpZHRoKClcbiAgICAgICAgfSwgcGFyc2VJbnQoYXR0cnMudGltZSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwic2Nyb2xsVG9Db250YWN0b1wiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcImJvZHksIGh0bWxcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsVG9wOiAkKFwiZm9vdGVyLXNlY3Rpb25cIikub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KS5kaXJlY3RpdmUoXCJzY3JvbGxUb1RhcmdldFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcImJvZHksIGh0bWxcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsVG9wOiAkKGF0dHJzLnRhcmdldCkub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDcwMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KS5kaXJlY3RpdmUoXCJlc2NvbmRlTWVudVwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNuYXZiYXJcIikuY29sbGFwc2UoXCJoaWRlXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwiZmxvdGFudGVcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDUwKSB7XG4gICAgICAgICAgLy8gW1RCTV1cbiAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTkyKSB7XG4gICAgICAgICAgICAvLyBbVEJNXVxuICAgICAgICAgICAgJChlbG0pLmFkZENsYXNzKFwiZmxvdGFudGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoZWxtKS5yZW1vdmVDbGFzcyhcImZsb3RhbnRlXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIkF1dGhNb2R1bGVcIiwgW10pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiSG9tZU1vZHVsZVwiLCBbXSkuY29udHJvbGxlcihcImhvbWUuaW5kZXhcIiwgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHApIHtcbiAgJGh0dHAuZ2V0KFwiL2Fzc2V0cy9kYXRhL2hvbWUvaG9tZS5qc29uXCIpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTtcbiAgICAkc2NvcGUuY2FiZWNlcmEgPSBkYXRhLmNhYmVjZXJhO1xuICAgICRzY29wZS5sZXllbmRvVHVNZW50ZSA9IGRhdGEubGV5ZW5kb1R1TWVudGU7XG4gICAgJHNjb3BlLmltYWdlbkVtcHJlc2EgPSBkYXRhLmltYWdlbkVtcHJlc2E7XG4gICAgJHNjb3BlLmVxdWlwb01hcmtldGluZyA9IGRhdGEuZXF1aXBvTWFya2V0aW5nO1xuICAgICRzY29wZS5mZWF0dXJlc0FwcCA9IGRhdGEuZmVhdHVyZXNBcHA7XG4gICAgJHNjb3BlLmJlbmVmaWNpb3MgPSBkYXRhLmJlbmVmaWNpb3M7XG4gICAgJHNjb3BlLmFob3JybyA9IGRhdGEuYWhvcnJvO1xuICAgICRzY29wZS5lcXVpcG9BbnQgPSBkYXRhLmVxdWlwb0FudDtcblxuICAgICRzY29wZS5mZWF0dXJlc0l0ZW1BY3Rpdm8gPSAkc2NvcGUuZmVhdHVyZXNBcHAuaXRlbXNbMF07XG4gICAgJHNjb3BlLmVxdWlwb0l0ZW1BY3Rpdm8gPSAkc2NvcGUuZXF1aXBvQW50Lml0ZW1zWzBdO1xuICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfSk7XG5cbiAgJHNjb3BlLnNldEZlYXR1cmVzSXRlbUFjdGl2byA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgJHNjb3BlLmZlYXR1cmVzSXRlbUFjdGl2byA9IGl0ZW07XG4gIH07XG4gICRzY29wZS5zZXRFcXVpcG9JdGVtQWN0aXZvID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAkc2NvcGUuZXF1aXBvSXRlbUFjdGl2byA9IGl0ZW07XG4gIH07XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIkhvbWVNb2R1bGVcIikuZGlyZWN0aXZlKFwiZmFkZUluT25TY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbG0sIGF0dHJzKSB7XG4gICAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSArIHdpbmRvdy5pbm5lckhlaWdodCAqIDAuNSA+PSAkKGVsbSkub2Zmc2V0KCkudG9wKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coZWxtKTtcbiAgICAgICAgICAkKGVsbSkuZmluZChcIi5jdWVycG9cIikuY3NzKFwib3BhY2l0eVwiKSA9PSAwICYmICQoZWxtKS5maW5kKFwiLmN1ZXJwb1wiKS5hZGRDbGFzcyhcImZhZGVJblwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSkuZGlyZWN0aXZlKFwiY2FiZWNlcmFcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9jYWJlY2VyYS5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImxleWVuZG9UdU1lbnRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvbGV5ZW5kby10dS1tZW50ZS5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImltYWdlbkVtcHJlc2FcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9pbWFnZW4tZW1wcmVzYS5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImVxdWlwb01hcmtldGluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2VxdWlwby1tYXJrZXRpbmcuaHRtbFwiXG4gIH07XG59KS5kaXJlY3RpdmUoXCJmZWF0dXJlc0FwcFwiLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2ZlYXR1cmVzLWFwcC5odG1sXCJcbiAgfTtcbn0pLmRpcmVjdGl2ZShcImJlbmVmaWNpb3NcIiwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9iZW5lZmljaW9zLmh0bWxcIlxuICB9O1xufSkuZGlyZWN0aXZlKFwiYWhvcnJvXCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvYWhvcnJvLmh0bWxcIlxuICB9O1xufSkuZGlyZWN0aXZlKFwiZXF1aXBvQW50XCIsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvZXF1aXBvLWFudC5odG1sXCJcbiAgfTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwiYXV0aFwiLCBmdW5jdGlvbiAoJGh0dHAsICR3aW5kb3cpIHtcbiAgdmFyIF9nZXRUb2tlbiA9IGZ1bmN0aW9uIF9nZXRUb2tlbigpIHtcbiAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2VbXCJhbnQtdG9rZW5cIl07XG4gIH07XG5cbiAgdmFyIHNlY3VyZUtleSA9IHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIiArIF9nZXRUb2tlbigpXG4gICAgfVxuICB9O1xuICB2YXIgX3NhdmVUb2tlbiA9IGZ1bmN0aW9uIF9zYXZlVG9rZW4odG9rZW4pIHtcbiAgICAkd2luZG93LmxvY2FsU3RvcmFnZVtcImFudC10b2tlblwiXSA9IHRva2VuO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHNhdmVUb2tlbjogZnVuY3Rpb24gc2F2ZVRva2VuKHRva2VuKSB7XG4gICAgICByZXR1cm4gX3NhdmVUb2tlbih0b2tlbik7XG4gICAgfSxcbiAgICBnZXRUb2tlbjogZnVuY3Rpb24gZ2V0VG9rZW4oKSB7XG4gICAgICByZXR1cm4gX2dldFRva2VuKCk7XG4gICAgfSxcbiAgICBzZWN1cmVLZXk6IHNlY3VyZUtleSxcbiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuICAgICAgdmFyIHRva2VuID0gX2dldFRva2VuKCk7XG4gICAgICB2YXIgcGF5bG9hZCA9IHZvaWQgMDtcblxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHBheWxvYWQgPSB0b2tlbi5zcGxpdChcIi5cIilbMV07XG4gICAgICAgIHBheWxvYWQgPSAkd2luZG93LmF0b2IocGF5bG9hZCk7XG4gICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuXG4gICAgICAgIHJldHVybiBwYXlsb2FkLmV4cCA+IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3VycmVudFVzZXI6IGZ1bmN0aW9uIGN1cnJlbnRVc2VyKCkge1xuICAgICAgaWYgKGlzTG9nZ2VkSW4oKSkge1xuICAgICAgICB2YXIgdG9rZW4gPSBfZ2V0VG9rZW4oKTtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB0b2tlbi5zcGxpdChcIi5cIilbMV07XG4gICAgICAgIHBheWxvYWQgPSAkd2luZG93LmF0b2IocGF5bG9hZCk7XG4gICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuICAgICAgICByZXR1cm4geyBlbWFpbDogcGF5bG9hZC5lbWFpbCwgbmFtZTogcGF5bG9hZC5uYW1lIH07XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4odXNlcikge1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoXCIvYXBpL3VzdWFyaW9zL2xvZ2luXCIsIHVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIF9zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YS50b2tlbik7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiYW50LXRva2VuXCIpO1xuICAgIH1cbiAgfTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwiZ2V0QXBpRGF0YVwiLCBmdW5jdGlvbiAoJGh0dHAsICRyb290U2NvcGUpIHtcbiAgdmFyIGdldHRlciA9IGZ1bmN0aW9uIGdldHRlcih1cmwpIHtcbiAgICByZXR1cm4gJGh0dHAoeyBtZXRob2Q6IFwiR0VUXCIsIHVybDogdXJsIH0pO1xuICB9O1xuXG4gIHJldHVybiB7fTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwic3RvcmFnZVwiLCBmdW5jdGlvbiAoJHdpbmRvdywgJHJvb3RTY29wZSkge1xuICByZXR1cm4ge307XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIkF1dGhNb2R1bGVcIikuY29udHJvbGxlcihcImF1dGgubG9naW5cIiwgZnVuY3Rpb24gKCRzY29wZSwgJHdpbmRvdywgYXV0aCkge1xuICBpZiAoIWF1dGguaXNMb2dnZWRJbigpKSB7XG4gICAgJHNjb3BlLmVtYWlsID0gXCJcIjtcbiAgICAkc2NvcGUucGFzc3dvcmQgPSBcIlwiO1xuICAgICRzY29wZS5mYWlsTG9naW4gPSBmYWxzZTtcblxuICAgICRzY29wZS5zZW5kRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGF1dGgubG9naW4oeyBlbWFpbDogJHNjb3BlLmVtYWlsLCBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICRzY29wZS5mYWlsTG9naW4gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiIy9cIjtcbiAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG59KS5jb250cm9sbGVyKFwiYXV0aC5sb2dvdXRcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHdpbmRvdywgYXV0aCkge1xuICBhdXRoLmxvZ291dCgpO1xuICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIiMvXCI7XG4gICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59KTtcblwidXNlIHN0cmljdFwiO1xuXG5hbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIikuY29udHJvbGxlcihcImdlbmVyYWwubWFpbi1tZW51XCIsIGZ1bmN0aW9uICgpIHt9KS5jb250cm9sbGVyKFwiZ2VuZXJhbC5mb290ZXJcIiwgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHApIHtcbiAgJHNjb3BlLnNlbnQgPSBmYWxzZTtcbiAgJHNjb3BlLmZvcm1jb250YWN0byA9IHtcbiAgICBub21icmU6IFwiXCIsXG4gICAgdGVsZWZvbm86IFwiXCIsXG4gICAgZW1haWw6IFwiXCIsXG4gICAgY29uc3VsdGE6IFwiXCIsXG4gICAgc29saWNpdGFkbzogZmFsc2VcbiAgfTtcbiAgJHNjb3BlLmZvcm1jb250YWN0by5lbnZpYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgJHNjb3BlLnNlbnQgPSB0cnVlO1xuICAgICRodHRwLnBvc3QoXCJhcGkvbWFpbGluZy9jb250YWN0b1wiLCB7XG4gICAgICBub21icmU6ICRzY29wZS5mb3JtY29udGFjdG8ubm9tYnJlLFxuICAgICAgdGVsZWZvbm86ICRzY29wZS5mb3JtY29udGFjdG8udGVsZWZvbm8sXG4gICAgICBlbWFpbDogJHNjb3BlLmZvcm1jb250YWN0by5lbWFpbCxcbiAgICAgIGNvbnN1bHRhOiAkc2NvcGUuZm9ybWNvbnRhY3RvLmNvbnN1bHRhXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5zZW50ID0gZmFsc2U7XG4gICAgICAkc2NvcGUuZm9ybWNvbnRhY3RvLnNvbGljaXRhZG8gPSB0cnVlO1xuICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5lbnZpb0NvcnJlY3RvID0gdHJ1ZTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICRzY29wZS5zZW50ID0gZmFsc2U7XG4gICAgICAkc2NvcGUuZm9ybWNvbnRhY3RvLnNvbGljaXRhZG8gPSB0cnVlO1xuICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5lbnZpb0NvcnJlY3RvID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9KTtcbiAgfTtcbn0pOyIsImFuZ3VsYXJcbiAgLm1vZHVsZShcIk1haW5BcHBcIiwgW1xuICAgIFwibmdSb3V0ZVwiLFxuICAgIFwibmdUb3VjaFwiLFxuICAgIFwiSG9tZU1vZHVsZVwiLFxuICAgIFwiQXV0aE1vZHVsZVwiXG4gIF0pXG4gIC5jb250cm9sbGVyKFxuICAgIFwibWFpbkNvbnRyb2xsZXJcIixcbiAgICAoJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkd2luZG93LCBhdXRoKSA9PiB7XG5cbiAgICAgICRyb290U2NvcGUuaXNNb2JpbGUgPSAkd2luZG93LmlubmVyV2lkdGggPD0gNzY4O1xuXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZChcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgICAgICRyb290U2NvcGUuaXNNb2JpbGUgPSAkd2luZG93LmlubmVyV2lkdGggPD0gNzY4O1xuICAgICAgICAkcm9vdFNjb3BlLiQkcGhhc2UgfHwgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbihcIiRyb3V0ZUNoYW5nZVN1Y2Nlc3NcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgYm9keUNsYXNzID0gXCJcIjtcblxuICAgICAgICBsZXQgcGF0aCA9ICRsb2NhdGlvbi4kJHBhdGguc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgIHBhdGgubWFwKHRyYW1vID0+IHtcbiAgICAgICAgICBpZiAodHJhbW8gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGJvZHlDbGFzcyArPSBgLSR7dHJhbW99YDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRyb290U2NvcGUuYm9keUNsYXNzID1cbiAgICAgICAgICBib2R5Q2xhc3MgIT09IFwiXCIgPyBgcGFnZSR7Ym9keUNsYXNzfWAgOiBcInBhZ2UtaG9tZVwiO1xuICAgICAgfSk7XG4gICAgfVxuICApXG4gIC5maWx0ZXIoXCJwcmVjaW9cIiwgKCkgPT4ge1xuICAgIHJldHVybiBpbnB1dCA9PiB7XG4gICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoaW5wdXQpLnRvRml4ZWQoMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICB9KVxuICAuZmlsdGVyKFwiZW5jb2RldXJsXCIsICgpID0+IHtcbiAgICByZXR1cm4gaW5wdXQgPT4ge1xuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH07XG4gIH0pXG4gIC5maWx0ZXIoXCJyZW1vdmVUcmFpbGluZ1NsYXNoXCIsICgpID0+IHtcbiAgICByZXR1cm4gaW5wdXQgPT4ge1xuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dFswXSA9PT0gXCIvXCIpIHJldHVybiBpbnB1dC5zbGljZSgxKTtcbiAgICAgICAgZWxzZSByZXR1cm4gaW5wdXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5jb25maWcoKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikgPT4ge1xuICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KFwiXCIpO1xuXG4gICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oXCIvXCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwiaG9tZS5pbmRleFwiXG4gICAgfSlcbiAgICAud2hlbihcIi9jYXJyaXRvXCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9jYXJyaXRvL2luZGV4Lmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwiY2Fycml0by5pbmRleFwiXG4gICAgfSlcbiAgICAud2hlbihcIi9wcm9kdWN0b3NcIiwge1xuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL3Byb2R1Y3Rvcy9pbmRleC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcInByb2R1Y3Rvcy5pbmRleFwiXG4gICAgfSlcbiAgICAud2hlbihcIi9wcm9kdWN0b3MvOmlkXCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9wcm9kdWN0b3Mvc2hvdy5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcInByb2R1Y3Rvcy5zaG93XCJcbiAgICB9KVxuXG4gICAgXG5cbiAgICAud2hlbihcIi9sb2dpblwiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvYXV0aC9sb2dpbi5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcImF1dGgubG9naW5cIlxuICAgIH0pXG4gICAgLndoZW4oXCIvbG9nb3V0XCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2hvbWUvaW5kZXguaHRtbFwiLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBzZWN1cmVBY2Nlc3M6IChhdXRoLCAkd2luZG93KSA9PiB7XG4gICAgICAgICAgaWYgKCFhdXRoLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBcImF1dGgubG9nb3V0XCJcbiAgICB9KVxuXG4gICAgXG5cbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2luZGV4Lmh0bWxcIixcbiAgICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gICAgfSk7XG59KTtcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZShcIk1haW5BcHBcIilcbiAgLmRpcmVjdGl2ZShcIm1haW5NZW51XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2dlbmVyYWwvbWFpbi1tZW51Lmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwiZ2VuZXJhbC5tYWluLW1lbnVcIlxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJmb290ZXJTZWN0aW9uXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2dlbmVyYWwvZm9vdGVyLXNlY3Rpb24uaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJnZW5lcmFsLmZvb3RlclwiXG4gICAgfTtcbiAgfSlcbiAgLy8gLmRpcmVjdGl2ZShcImhpZGVBbGxcIiwgKCkgPT4ge1xuICAvLyAgIHJldHVybiB7XG4gIC8vICAgICByZXN0cmljdDogXCJBXCIsXG4gIC8vICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgLy8gICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCcxJyk7XG4gIC8vICAgICAgICAgJChhdHRycy5oaWRlQWxsKS5zbGlkZVVwKDEwMCk7XG4gIC8vICAgICAgIH0pO1xuICAvLyAgICAgfVxuICAvLyAgIH07XG4gIC8vIH0pXG4gIC5kaXJlY3RpdmUoXCJzbGlkZU5leHRcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgIGF0dHJzLmhpZGVBbGwgJiYgJChhdHRycy5oaWRlQWxsKS5zbGlkZVVwKCk7XG4gICAgICAgICAgJChlbG0pXG4gICAgICAgICAgICAubmV4dCgpXG4gICAgICAgICAgICAuc3RvcCgpXG4gICAgICAgICAgICAuc2xpZGVEb3duKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJsb2FkRnJhbWVcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChcImRvY3VtZW50XCIpLnJlYWR5KCgpID0+IHtcbiAgICAgICAgICAkKGVsbSkuYXR0cihcInNyY1wiLCBhdHRycy5zb3VyY2UpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwic2Nyb2xsUmlnaHRcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICQoYXR0cnMudGFyZ2V0KS5hbmltYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JvbGxMZWZ0OiBcIis9XCIgKyAkKGF0dHJzLnRhcmdldCkud2lkdGgoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcnNlSW50KGF0dHJzLnRpbWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcInNjcm9sbExlZnRcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICQoYXR0cnMudGFyZ2V0KS5hbmltYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JvbGxMZWZ0OiBcIi09XCIgKyAkKGF0dHJzLnRhcmdldCkud2lkdGgoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcnNlSW50KGF0dHJzLnRpbWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcInNjcm9sbFRvQ29udGFjdG9cIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICBsaW5rOiAoc2NvcGUsIGVsbSwgYXR0cnMpID0+IHtcbiAgICAgICAgJChlbG0pLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNjcm9sbFRvcDogJChcImZvb3Rlci1zZWN0aW9uXCIpLm9mZnNldCgpLnRvcFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDUwMFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJzY3JvbGxUb1RhcmdldFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICAgIGxpbms6IChzY29wZSwgZWxtLCBhdHRycykgPT4ge1xuICAgICAgICAkKGVsbSkub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgJChcImJvZHksIGh0bWxcIikuYW5pbWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKGF0dHJzLnRhcmdldCkub2Zmc2V0KCkudG9wXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNzAwXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImVzY29uZGVNZW51XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQoZWxtKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAkKFwiI25hdmJhclwiKS5jb2xsYXBzZShcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJmbG90YW50ZVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICAgIGxpbms6IChzY29wZSwgZWxtLCBhdHRycykgPT4ge1xuICAgICAgICAkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZSA9PiB7XG4gICAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDUwKSB7XG4gICAgICAgICAgICAvLyBbVEJNXVxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk5Mikge1xuICAgICAgICAgICAgICAvLyBbVEJNXVxuICAgICAgICAgICAgICAkKGVsbSkuYWRkQ2xhc3MoXCJmbG90YW50ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChlbG0pLnJlbW92ZUNsYXNzKFwiZmxvdGFudGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiQXV0aE1vZHVsZVwiLCBbXSk7XG4iLCJhbmd1bGFyLm1vZHVsZShcIkhvbWVNb2R1bGVcIiwgW10pLmNvbnRyb2xsZXIoXCJob21lLmluZGV4XCIsICgkc2NvcGUsICRodHRwKSA9PiB7XG4gICRodHRwLmdldChcIi9hc3NldHMvZGF0YS9ob21lL2hvbWUuanNvblwiKS50aGVuKFxuICAgICh7IGRhdGEgfSkgPT4ge1xuICAgICAgKHtcbiAgICAgICAgY2FiZWNlcmE6ICRzY29wZS5jYWJlY2VyYSxcbiAgICAgICAgbGV5ZW5kb1R1TWVudGU6ICRzY29wZS5sZXllbmRvVHVNZW50ZSxcbiAgICAgICAgaW1hZ2VuRW1wcmVzYTogJHNjb3BlLmltYWdlbkVtcHJlc2EsXG4gICAgICAgIGVxdWlwb01hcmtldGluZzogJHNjb3BlLmVxdWlwb01hcmtldGluZyxcbiAgICAgICAgZmVhdHVyZXNBcHA6ICRzY29wZS5mZWF0dXJlc0FwcCxcbiAgICAgICAgYmVuZWZpY2lvczogJHNjb3BlLmJlbmVmaWNpb3MsXG4gICAgICAgIGFob3JybzogJHNjb3BlLmFob3JybyxcbiAgICAgICAgZXF1aXBvQW50OiAkc2NvcGUuZXF1aXBvQW50XG4gICAgICB9ID0gZGF0YSk7XG4gICAgICAkc2NvcGUuZmVhdHVyZXNJdGVtQWN0aXZvID0gJHNjb3BlLmZlYXR1cmVzQXBwLml0ZW1zWzBdO1xuICAgICAgJHNjb3BlLmVxdWlwb0l0ZW1BY3Rpdm8gPSAkc2NvcGUuZXF1aXBvQW50Lml0ZW1zWzBdO1xuICAgIH0sXG4gICAgZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICApO1xuXG4gICRzY29wZS5zZXRGZWF0dXJlc0l0ZW1BY3Rpdm8gPSBpdGVtID0+IHtcbiAgICAkc2NvcGUuZmVhdHVyZXNJdGVtQWN0aXZvID0gaXRlbTtcbiAgfTtcbiAgJHNjb3BlLnNldEVxdWlwb0l0ZW1BY3Rpdm8gPSBpdGVtID0+IHtcbiAgICAkc2NvcGUuZXF1aXBvSXRlbUFjdGl2byA9IGl0ZW07XG4gIH07XG59KTtcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZShcIkhvbWVNb2R1bGVcIilcbiAgLmRpcmVjdGl2ZShcImZhZGVJbk9uU2Nyb2xsXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgICAgbGluazogKHNjb3BlLCBlbG0sIGF0dHJzKSA9PiB7XG4gICAgICAgICQod2luZG93KS5vbihcInNjcm9sbFwiLCBlID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjUgPj1cbiAgICAgICAgICAgICQoZWxtKS5vZmZzZXQoKS50b3BcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsbSk7XG4gICAgICAgICAgICAkKGVsbSlcbiAgICAgICAgICAgICAgLmZpbmQoXCIuY3VlcnBvXCIpXG4gICAgICAgICAgICAgIC5jc3MoXCJvcGFjaXR5XCIpID09IDAgJiZcbiAgICAgICAgICAgICAgJChlbG0pXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuY3VlcnBvXCIpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiZmFkZUluXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImNhYmVjZXJhXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvY2FiZWNlcmEuaHRtbFwiXG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImxleWVuZG9UdU1lbnRlXCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvbGV5ZW5kby10dS1tZW50ZS5odG1sXCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiaW1hZ2VuRW1wcmVzYVwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2ltYWdlbi1lbXByZXNhLmh0bWxcIlxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJlcXVpcG9NYXJrZXRpbmdcIiwgKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9lcXVpcG8tbWFya2V0aW5nLmh0bWxcIlxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoXCJmZWF0dXJlc0FwcFwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2ZlYXR1cmVzLWFwcC5odG1sXCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiYmVuZWZpY2lvc1wiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2JlbmVmaWNpb3MuaHRtbFwiXG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZShcImFob3Jyb1wiLCAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9ob21lL2Fob3Jyby5odG1sXCJcbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKFwiZXF1aXBvQW50XCIsICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2hvbWUvZXF1aXBvLWFudC5odG1sXCJcbiAgICB9O1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwiYXV0aFwiLCAoJGh0dHAsICR3aW5kb3cpID0+IHtcbiAgY29uc3QgZ2V0VG9rZW4gPSAoKSA9PiAkd2luZG93LmxvY2FsU3RvcmFnZVtcImFudC10b2tlblwiXTtcblxuICBjb25zdCBzZWN1cmVLZXkgPSB7XG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIgKyBnZXRUb2tlbigpXG4gICAgfVxuICB9O1xuICBjb25zdCBzYXZlVG9rZW4gPSB0b2tlbiA9PiB7XG4gICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2VbXCJhbnQtdG9rZW5cIl0gPSB0b2tlbjtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBzYXZlVG9rZW46IHRva2VuID0+IHNhdmVUb2tlbih0b2tlbiksXG4gICAgZ2V0VG9rZW46ICgpID0+IGdldFRva2VuKCksXG4gICAgc2VjdXJlS2V5OiBzZWN1cmVLZXksXG4gICAgaXNMb2dnZWRJbjogKCkgPT4ge1xuICAgICAgbGV0IHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICAgIGxldCBwYXlsb2FkO1xuXG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgcGF5bG9hZCA9IHRva2VuLnNwbGl0KFwiLlwiKVsxXTtcbiAgICAgICAgcGF5bG9hZCA9ICR3aW5kb3cuYXRvYihwYXlsb2FkKTtcbiAgICAgICAgcGF5bG9hZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheWxvYWQuZXhwID4gRGF0ZS5ub3coKSAvIDEwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBjdXJyZW50VXNlcjogKCkgPT4ge1xuICAgICAgaWYgKGlzTG9nZ2VkSW4oKSkge1xuICAgICAgICBsZXQgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgICAgICBsZXQgcGF5bG9hZCA9IHRva2VuLnNwbGl0KFwiLlwiKVsxXTtcbiAgICAgICAgcGF5bG9hZCA9ICR3aW5kb3cuYXRvYihwYXlsb2FkKTtcbiAgICAgICAgcGF5bG9hZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG4gICAgICAgIHJldHVybiB7IGVtYWlsOiBwYXlsb2FkLmVtYWlsLCBuYW1lOiBwYXlsb2FkLm5hbWUgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxvZ2luOiB1c2VyID0+XG4gICAgICAkaHR0cC5wb3N0KFwiL2FwaS91c3Vhcmlvcy9sb2dpblwiLCB1c2VyKS50aGVuKFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgICApLFxuICAgIGxvZ291dDogKCkgPT4ge1xuICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImFudC10b2tlblwiKTtcbiAgICB9XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiKS5mYWN0b3J5KFwiZ2V0QXBpRGF0YVwiLCAoJGh0dHAsICRyb290U2NvcGUpID0+IHtcbiAgY29uc3QgZ2V0dGVyID0gdXJsID0+IHtcbiAgICByZXR1cm4gJGh0dHAoeyBtZXRob2Q6IFwiR0VUXCIsIHVybDogdXJsIH0pO1xuICB9O1xuXG4gIHJldHVybiB7fTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoXCJNYWluQXBwXCIpLmZhY3RvcnkoXCJzdG9yYWdlXCIsICgkd2luZG93LCAkcm9vdFNjb3BlKSA9PiB7XG4gIHJldHVybiB7fTtcbn0pO1xuIiwiYW5ndWxhclxuICAubW9kdWxlKFwiQXV0aE1vZHVsZVwiKVxuICAuY29udHJvbGxlcihcImF1dGgubG9naW5cIiwgKCRzY29wZSwgJHdpbmRvdywgYXV0aCkgPT4ge1xuICAgIGlmICghYXV0aC5pc0xvZ2dlZEluKCkpIHtcbiAgICAgICRzY29wZS5lbWFpbCA9IFwiXCI7XG4gICAgICAkc2NvcGUucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgJHNjb3BlLmZhaWxMb2dpbiA9IGZhbHNlO1xuXG4gICAgICAkc2NvcGUuc2VuZEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGF1dGhcbiAgICAgICAgICAubG9naW4oeyBlbWFpbDogJHNjb3BlLmVtYWlsLCBwYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkIH0pXG4gICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICRzY29wZS5mYWlsTG9naW4gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gIH0pXG4gIC5jb250cm9sbGVyKFwiYXV0aC5sb2dvdXRcIiwgKCRzY29wZSwgJHdpbmRvdywgYXV0aCkgPT4ge1xuICAgIGF1dGgubG9nb3V0KCk7XG4gICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIjL1wiO1xuICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xuIiwiYW5ndWxhclxuICAubW9kdWxlKFwiTWFpbkFwcFwiKVxuICAuY29udHJvbGxlcihcImdlbmVyYWwubWFpbi1tZW51XCIsICgpID0+IHt9KVxuICAuY29udHJvbGxlcihcImdlbmVyYWwuZm9vdGVyXCIsICgkc2NvcGUsICRodHRwKSA9PiB7XG4gICAgJHNjb3BlLnNlbnQgPSBmYWxzZTtcbiAgICAkc2NvcGUuZm9ybWNvbnRhY3RvID0ge1xuICAgICAgbm9tYnJlOiBcIlwiLFxuICAgICAgdGVsZWZvbm86IFwiXCIsXG4gICAgICBlbWFpbDogXCJcIixcbiAgICAgIGNvbnN1bHRhOiBcIlwiLFxuICAgICAgc29saWNpdGFkbzogZmFsc2VcbiAgICB9O1xuICAgICRzY29wZS5mb3JtY29udGFjdG8uZW52aWFyID0gKCkgPT4ge1xuICAgICAgJHNjb3BlLnNlbnQgPSB0cnVlO1xuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoXCJhcGkvbWFpbGluZy9jb250YWN0b1wiLCB7XG4gICAgICAgICAgbm9tYnJlOiAkc2NvcGUuZm9ybWNvbnRhY3RvLm5vbWJyZSxcbiAgICAgICAgICB0ZWxlZm9ubzogJHNjb3BlLmZvcm1jb250YWN0by50ZWxlZm9ubyxcbiAgICAgICAgICBlbWFpbDogJHNjb3BlLmZvcm1jb250YWN0by5lbWFpbCxcbiAgICAgICAgICBjb25zdWx0YTogJHNjb3BlLmZvcm1jb250YWN0by5jb25zdWx0YVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihcbiAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAkc2NvcGUuc2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5zb2xpY2l0YWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5mb3JtY29udGFjdG8uZW52aW9Db3JyZWN0byA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICAkc2NvcGUuc2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmZvcm1jb250YWN0by5zb2xpY2l0YWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5mb3JtY29udGFjdG8uZW52aW9Db3JyZWN0byA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH07XG4gIH0pO1xuIl19
